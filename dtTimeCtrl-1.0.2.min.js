const gblDateCtrlInfoByFieldName=[],gblDateCtrlInfoByIndex=[],gblDateCtrlState={};export default function DateTimeCtrl(){console.log("DateTimeCtrl constructor called");const e=this,t='"';function p(p){let h,n,a=[],i=window.innerWidth,d=window.innerHeight,r="Select Date",c=p.pickDate,g=new Date,x=!1,b="",f=c.getFullYear();const m=function(e){const t=new Date;return t.setDate(1),t.setMonth(e.getMonth()),t.setFullYear(e.getFullYear()),t.getDay()}(c),y=function(e){let t=e.getFullYear(),p=e.getMonth()+1;p>11&&(p=1,t+=1);let s=new Date;s.setFullYear(t),s.setDate(1),s.setMonth(p);let u=new Date;return u.setTime(s.getTime()-864e5),u.getDate()}(c),D=["January","February","March","April","May","June","July","August","September","October","November","December"][c.getMonth()];let v=Math.floor(.05*i),B=i-2*v,k=B,w=Math.floor(B/7.5);i>d&&(B=k=d-2*(v=Math.floor(.05*d)),w=Math.floor(k/7.5)),i<500&&(b="_s"),"string"==typeof p.pickDateCaption&&(r=p.pickDateCaption),a.push("<div class='calCaption"+b+"' "),a.push("style="+t),a.push("width:"+(B-20)+"px;"),a.push(t),a.push(">"),a.push(r),a.push(":</div>"),a.push("<button "),a.push("class='closeBtn' "),a.push("id='calPopupCloseBtn' "),a.push("onclick="+t),a.push("hideCalendarCtl()"+t+" "),a.push(">"),a.push("âœ–</button>"),a.push("<div class='calMonthYear' "),i<400&&a.push("style="+t+"top:40px;"+t),a.push(">"),a.push("<span class='calMonthName"+b+"'>"+D+"&nbsp;</span>"),i<400&&a.push("<br>"),a.push("<span class='calYear"+b+"'>"+c.getFullYear()+"</span>"),a.push("</div>"),a.push("<button class='calPrevBtn"+b+"' id='calPopupPrevBtn' "),a.push("data-field="+t+p.field+t+" "),a.push("title='previous month' "),a.push(">"),a.push("&lt;</button>"),a.push("<button class='calTodayBtn"+b+"' id='calPopupTodayBtn' "),a.push("data-field="+t+p.field+t+" "),a.push("title='jump to today' "),a.push(">"),a.push("Today</button>"),a.push("<button class='calNextBtn"+b+"' id='calPopupNextBtn' "),a.push("data-field="+t+p.field+t+" "),a.push("title='next month' "),a.push(">"),a.push("&gt;</button>"),h=90;const M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];n=20;for(let e=0;e<7;e++)a.push("<div class='calWeekday' "),a.push("style="+t),a.push("left:"+n+"px;"),a.push("top:"+h+"px;"),a.push("width:"+w+"px;"),a.push("height:"+w+"px;"),0!==e&&6!==e||a.push("color:gray;"),a.push(t),a.push(">"),a.push(M[e]),a.push("&nbsp;</div>"),n=n+w-1;let S=0;h+=20;for(let e=0;e<6;e++){n=20;for(let e=0;e<7;e++){let s="calBlock1 calDateBlock";if(0!==e&&6!==e||(s="calBlock2 calDateBlock"),0===S?m===e&&(S+=1):S+=1,0===S||S>y?s="calBlockEmpty":(p.hasValue&&p.selMonth===c.getMonth()&&p.selDate===S&&p.selYear===c.getFullYear()&&(s="calBlockSel calDateBlock",x=!0),x||p.pendingSelDatePicked&&p.pendingSelMonth===c.getMonth()&&p.pendingSelDateNum===S&&p.pendingSelYear===c.getFullYear()&&(s="calBlockSel calDateBlock",x=!0)),a.push("<div class='"+s+"' "),a.push("style="+t),a.push("left:"+n+"px;"),a.push("top:"+h+"px;"),a.push("width:"+w+"px;"),a.push("height:"+w+"px;"),a.push(t),S>0&&S<=y&&(a.push(" "),a.push("data-field="+t+p.field+t+" "),a.push("data-weekday="+t+e+t+" "),a.push("data-month="+t+c.getMonth()+t+" "),a.push("data-date="+t+S+t+" "),a.push("data-year="+t+c.getFullYear()+t+" ")),a.push(">"),S>0&&S<=y){let p=!1,s=new Date;s.setFullYear(f),s.setMonth(c.getMonth()),s.setDate(S),g.getDate()===s.getDate()&&g.getMonth()===s.getMonth()&&g.getFullYear()===s.getFullYear()&&(p=!0),a.push("<div "),p?(a.push("class='calToday' "),a.push("title='Today's Date ")):a.push("class='calOtherDays' ");let u=6,o=3;i<400&&(u=2,o=1),a.push("style="+t),a.push("position:absolute;"),a.push("right:"+u+"px;"),a.push("top:"+o+"px;"),p||0!==e&&6!==e||a.push("color:gray;"),a.push(t),a.push(">"),a.push(""+S),a.push("</div>")}a.push("</div>"),n=n+w-1}h=h+w-1}if((h+=10)+100>k&&(k=h+100),a.push("<div id='calDateTimeBox' "),a.push("style="+t),a.push("top:"+h+"px;"),a.push("width:"+(7*w-6)+"px;"),a.push(t),a.push(">"),a.push("<input id='calDateDsp' value='' readonly "),a.push(">"),!0===p.editTime){a.push("<span class='calAt' "),a.push(">@</span>");let e=c.getHours()+1,t=" selected",p="",s=c.getMinutes()+"";1===s.length&&(s="0"+s),e>12&&(e-=12,t="",p=" selected"),a.push("<input id='calHourEntry' value='"+e+"' maxlength='2' "),a.push(">"),a.push("<span class='calColonSep' "),a.push(">:</span>"),a.push("<input id='calMinuteEntry' value='"+s+"' maxlength='2' "),a.push(">"),a.push("<select id='calAmPmSelect' "),a.push(">"),a.push("<option value='AM'"+t+">AM</option>"),a.push("<option value='PM'"+p+">PM</option>"),a.push("</select>")}a.push("<button id='calSetDateBtn' class='calSetDateBtn"+b+"' "),a.push("data-field="+t+p.field+t+" "),a.push(">SET</button>"),a.push("</div>"),a.push("</div>");let E=document.getElementById("calPopup");if(null==E&&((E=document.createElement("div")).id="calPopup",E.style.position="absolute",E.style.zIndex="200",document.body.appendChild(E)),E.style.left=v+"px",E.style.top=v+"px",E.style.width=B+"px",E.style.height=k+"px",E.innerHTML=a.join(""),p.hasValue){let e=document.getElementById("calDateDsp");const t=o(new Date(p.dateValue));e.value=t}if(p.pendingSelDatePicked){let e=document.getElementById("calDateDsp");const t=o(p.pendingSelDate);e.value=t;const s=document.getElementById("calHourEntry");document.getElementById("calMinuteEntry"),document.getElementById("calAmPmSelect");s.value=p.pendingSelHour,s.value=p.pendingSelMinute,s.value=p.pendingSelAmPm}E.style.display="block";const I=document.getElementById("calDateTimeBox");I.style.display="none",""!==p.dateValue||p.pendingSelDate?I.style.display="block":!1===p.editTime&&(I.style.display="block");const C=document.getElementById("calPopupCloseBtn"),T=document.getElementById("calPopupPrevBtn"),z=document.getElementById("calPopupTodayBtn"),P=document.getElementById("calPopupNextBtn"),F=document.getElementById("calSetDateBtn"),N=document.getElementById("calHourEntry"),Y=document.getElementById("calMinuteEntry");C.addEventListener("click",l),T.addEventListener("click",e.calPrev),z.addEventListener("click",e.calToday),P.addEventListener("click",e.calNext),F.addEventListener("click",e.calSetDateTime),N.addEventListener("keydown",u),Y.addEventListener("keydown",u);const V=document.getElementsByClassName("calDateBlock"),H=V.length;for(let e=0;e<H;e++){V[e].addEventListener("click",s)}let A=document.getElementById("tint");null==A&&((A=document.createElement("div")).id="tint",A.style.background="black",A.style.opacity=".6",A.style.position="absolute",A.style.left="0px",A.style.top="0px",A.style.zIndex="100",document.body.appendChild(A)),A.style.width=i+"px",A.style.height=d+"px",A.style.display="block"}function s(e){const t=document.getElementsByClassName("calBlockSel");let p=t.length;for(let e=0;e<p;e++){const e=t[0],p=e.dataset.weekday-0;e.className=0===p||6===p?"calBlock2 calDateBlock":"calBlock1 calDateBlock"}const s=document.getElementById("calDateDsp");let u=e.target;"calToday"!==u.className&&"calOtherDays"!==u.className||(u=u.parentElement);const h=new DateTimeCtrl,l=u.dataset.field,n=u.dataset.month-0,a=u.dataset.date-0,i=u.dataset.year-0,d=h.getCtrl(l),r=new Date,c=d.pickDate;r.setMonth(n),r.setDate(a),r.setFullYear(i),r.setHours(c.getHours()),r.setMinutes(c.getMinutes()),d.pendingSelDate=r,d.pendingSelDatePicked=!0,d.pendingSelMonth=n,d.pendingSelDateNum=a,d.pendingSelYear=i,u.className="calBlockSel calDateBlock",s.value=o(r),document.getElementById("calDateTimeBox").style.display="block"}function u(e){const t=e.keyCode;let p=String.fromCharCode(t);if(t>95&&t<106&&(p=t-96+""),-1==="0123456789".indexOf(p)&&8!==t)return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0,!1}function o(e){if(void 0===e)return"";let t=e.getMonth()+1+"";1===t.length&&(t="0"+t);let p=e.getDate()+"";return 1===p.length&&(p="0"+p),t+"/"+p+"/"+e.getFullYear()}function h(e){let t="";if(""===e.dateValue)return"";const p=new Date(e.dateValue);return t=o(p),e.editTime&&(t=t+" @ "+function(e){let t=" AM",p=e.getHours()+1;p>12&&(p-=12,t=" PM");let s=e.getMinutes()+"";1===s.length&&(s="0"+s);return p+":"+s+t}(p)),t}function l(e){const t=document.getElementById("calPopup");t.innerHTML="",t.style.display="none";const p=document.getElementById("tint");p&&(p.style.display="none")}function n(e){if(!e.pendingSelDatePicked)return;const t=document.getElementById("calHourEntry");document.getElementById("calMinuteEntry"),document.getElementById("calAmPmSelect");e.pendingSelHour=t.value,e.pendingSelMinute=t.value,e.pendingSelAmPm=t.value}function a(e,t,p){const s=p.type,u=p.propName;let o;"boolean"===s&&(o=!1),"string"===s&&(o=""),"number"===s&&(o=0),"date"===s&&(o=new Date),"date"===s?p.defValue instanceof Date&&(o=p.defValue):typeof p.defValue===s&&(o=p.defValue),e[u]=o,"date"!==s?typeof t[u]===s&&(e[u]=t[u]):t[u]instanceof Date&&(e[u]=t[u])}e.ctrlVersion="1.0.2",void 0===gblDateCtrlState.configured&&(!function(){let e=[],t=document.getElementById("chomerDateTimeCtrlStyles");if(null!=t)return;const p='  font-family: "Benton Sans", "Helvetica Neue", helvetica, arial, sans-serif;';e.push("#calAmPmSelect {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  top:8px;"),e.push(p),e.push("  left:225px;"),e.push("  font-size:12pt;"),e.push("  height:30px;"),e.push("}"),e.push(".calAt {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  top:9px;"),e.push("  left:126px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  background:white;"),e.push("}"),e.push(".calBlock1 {"),e.push("  position:absolute;"),e.push("  padding:0;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  border:solid silver .5px;"),e.push(p),e.push("  background:white;"),e.push("}"),e.push(".calBlock2 {"),e.push("  position:absolute;"),e.push("  padding:0;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  border:solid silver .5px;"),e.push(p),e.push("  background:#f2f2f2;"),e.push("}"),e.push(".calBlock1:hover {"),e.push("  background:#e6e6ff;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calBlock2:hover {"),e.push("  background:#e6e6ff;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calBlockSel:hover {"),e.push("  background:#0099cc;"),e.push("  background: linear-gradient(to bottom, #ffd9b3 0%, #e6e6ff 90%);"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calBlockEmpty {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  border:solid silver .5px;"),e.push("  background:#ebebe0;"),e.push("}"),e.push(".calBlockSel {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  padding:0;"),e.push("  box-sizing:border-box;"),e.push("  border:solid silver .5px;"),e.push(p),e.push("  background:#ffd9b3;"),e.push("}"),e.push(".calBtn {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  height:35px;"),e.push("  top:6px;"),e.push(p),e.push("  cursor:pointer;"),e.push("}"),e.push(".calCaption {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  left:20px;"),e.push("  top:8px;"),e.push("  width: 300px;"),e.push(p),e.push("  font-size:24pt;"),e.push("  color:#0066cc;"),e.push("}"),e.push(".calCaption_s {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  left:20px;"),e.push("  top:8px;"),e.push("  width: 300px;"),e.push(p),e.push("  font-size:15pt;"),e.push("  color:#0066cc;"),e.push("}"),e.push(".calColonSep {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  left:180px;"),e.push("  top:6px;"),e.push("  width: 300px;"),e.push(p),e.push("  font-size:16pt;"),e.push("}"),e.push("#calDateDsp {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  left:0px;"),e.push("  top:3px;"),e.push("  width: 120px;"),e.push("  text-align:center;"),e.push(p),e.push("  font-size:12pt;"),e.push("}"),e.push("#calDateTimeBox {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  left:20px;"),e.push("  width: 300px;"),e.push("  height:85px;"),e.push("  border:solid white 1px;"),e.push("  border-radius:5px;"),e.push("}"),e.push("#calHourEntry {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  text-align:center;"),e.push(p),e.push("  left:148px;"),e.push("  top:3px;"),e.push("  width: 32px;"),e.push("  border:solid silver 1px;"),e.push("  border-radius:5px;"),e.push("}"),e.push(".calNextBtn {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  overflow:hidden;"),e.push("  height:35px;"),e.push("  top:45px;"),e.push("  right:48px;"),e.push("  width:35px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calNextBtn_s {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  padding-left:0px;"),e.push("  padding-right:0px;"),e.push("  text-align:center;"),e.push("  height:35px;"),e.push("  top:45px;"),e.push("  right:6px;"),e.push("  width:30px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  overflow:hidden;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push("#calMinuteEntry {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  top:3px;"),e.push("  left:187px;"),e.push("  width:32px;"),e.push(p),e.push("  border-radius:5px;"),e.push("  border:solid silver 1px;"),e.push("}"),e.push(".calMonthName {"),e.push("  font-weight:bold;"),e.push(p),e.push("  font-size:24pt;"),e.push("}"),e.push(".calMonthName_s {"),e.push("  font-weight:bold;"),e.push(p),e.push("  font-size:15pt;"),e.push("}"),e.push(".calMonthYear {"),e.push("  position:absolute;"),e.push("  left:20px;"),e.push("  top:50px;"),e.push("  width: 300px;"),e.push(p),e.push("}"),e.push(".calOtherDays {"),e.push("  width:30px;"),e.push("  height:30px;"),e.push("  overflow:hidden;"),e.push("  text-align:center;"),e.push("  line-height:30px;"),e.push(p),e.push("}"),e.push("#calPopup {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  display:none;"),e.push("  z-index:950;"),e.push("  background:white;"),e.push("  width:600px;"),e.push("  height:700px;"),e.push("  border:solid silver 3px;"),e.push("  border-radius:6px;"),e.push("}"),e.push(".calPrevBtn {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  overflow:hidden;"),e.push("  height:35px;"),e.push(p),e.push("  top:45px;"),e.push("  right:162px;"),e.push("  width:35px;"),e.push("  font-size:16pt;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calPrevBtn_s {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  overflow:hidden;"),e.push("  padding-left:0px;"),e.push("  padding-right:0px;"),e.push("  text-align:center;"),e.push("  height:35px;"),e.push(p),e.push("  top:45px;"),e.push("  right:115px;"),e.push("  width:30px;"),e.push("  font-size:16pt;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calToday {"),e.push("  background:red;"),e.push("  width:30px;"),e.push("  height:30px;"),e.push("  border-radius:50%;"),e.push("  font-weight:bold;"),e.push(p),e.push("  color:white;"),e.push("  text-align:center;"),e.push("  line-height:30px;"),e.push("}"),e.push(".calSetDateBtn {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  top:3px;"),e.push("  left:320px;"),e.push("  cursor:pointer;"),e.push("  height:35px;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push(p),e.push("  font-size:16pt;"),e.push("}"),e.push(".calSetDateBtn_s {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  top:45px;"),e.push("  left:-2px;"),e.push("  cursor:pointer;"),e.push("  height:35px;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  font-weight:bold;"),e.push("}"),e.push(".calTodayBtn {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  overflow:hidden;"),e.push("  height:35px;"),e.push("  top:45px;"),e.push("  right:85px;"),e.push("  width:75px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calTodayBtn_s {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  overflow:hidden;"),e.push("  padding-left:0px;"),e.push("  padding-right:0px;"),e.push("  text-align:center;"),e.push("  height:35px;"),e.push("  top:45px;"),e.push("  right:38px;"),e.push("  width:75px;"),e.push(p),e.push("  font-size:16pt;"),e.push("  background:#f2f2f2;"),e.push("  border-radius:3px;"),e.push("  border:solid gray 1px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".calWeekday {"),e.push("  position:absolute;"),e.push("  text-align:right;"),e.push(p),e.push("}"),e.push(".calWrapper {"),e.push("  position:absolute;"),e.push("  left:0px;"),e.push("  top:64px;"),e.push("}"),e.push(".calYear {"),e.push(p),e.push("  font-size:24pt;"),e.push("}"),e.push(".closeBtn {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  top:3px;"),e.push("  right:5px;"),e.push("  width:35px;"),e.push("  height:35px;"),e.push("  border-radius:3px;"),e.push("  border:solid #490a09 1px;"),e.push("  color:white;"),e.push("  text-shadow: -1px -1px gray;"),e.push("  background: linear-gradient(to bottom, #dc9589 0%, #a64231 49%, #973c2d 50%, #e97f3f 94%, #dfbb58 100%);"),e.push("  padding:0px;"),e.push(p),e.push("  font-size:20pt;"),e.push("  line-height:20px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".dateTime {"),e.push("  position:absolute;"),e.push("  box-sizing:border-box;"),e.push("  left:0px;"),e.push("  top:0px;"),e.push("  width:160px;"),e.push("  background:white;"),e.push("  height:28px;"),e.push("  font-size:10pt;"),e.push(p),e.push("  border-radius:5px 0px 0px 5px;"),e.push("  border:solid gray 1px;"),e.push("  margin-right:0px;"),e.push("  margin-top:2px;"),e.push("}"),e.push(".dateTimeButton {"),e.push("  position:absolute;"),e.push("  overflow:hidden;"),e.push("  box-sizing:border-box;"),e.push("  left:159px;"),e.push("  top:0px;"),e.push("  width:120px;"),e.push("  background:#f2f2f2;"),e.push("  border:solid gray 1px;"),e.push("  border-radius:0px 5px 5px 0px;"),e.push("  margin-left:0px;"),e.push("  margin-top:2px;"),e.push("  box-shadow:none;"),e.push("  width:30px;"),e.push("  font-weight:bold;"),e.push("  height:28px;"),e.push("  cursor:pointer;"),e.push("}"),e.push(".datetimeCtrlCtr {"),e.push("  position:relative;"),e.push("  left:0px;"),e.push("  top:0px;"),e.push("  height:32px;"),e.push("}"),(t=document.createElement("style")).id="chomerDateTimeCtrlStyles",t.innerHTML=e.join("\n"),document.body.appendChild(t)}(),gblDateCtrlState.configured=!0),e.newCtrlMarkup=function(e){const p={};p.field=e.field,a(p,e,{type:"string",propName:"dateValue"}),a(p,e,{type:"string",propName:"pickDateCaption",defValue:"Pick Date"}),a(p,e,{type:"boolean",propName:"editTime"});let s="Form Date";!0===p.editTime&&(s="Form Date and Time"),a(p,e,{type:"string",propName:"formCaption",defValue:s}),gblDateCtrlInfoByFieldName[p.field]=p,gblDateCtrlInfoByIndex.push(p);let u=[];return u.push("<div>"),u.push("<div class='datetimeCtrlCtr' >"),u.push("<input "),u.push("type='hidden' "),u.push("id='frmItm"+p.field+"' "),u.push(">"),u.push("<input "),u.push("class='dateTime' readonly "),u.push("id='frmItm"+p.field+"_vw' "),u.push("style="+t),u.push(t),u.push(">"),u.push("<button "),u.push("data-field="+t+p.field+t+" "),u.push("class='dateTimeButton' "),u.push("id='frmItm"+p.field+"_btn' "),u.push(">...</button>"),u.push("</div>"),u.push("</div>"),u.join("")},e.activateControls=function(){const t=gblDateCtrlInfoByIndex.length;for(let p=0;p<t;p++){const t=gblDateCtrlInfoByIndex[p],s=document.getElementById("frmItm"+t.field),u=document.getElementById("frmItm"+t.field+"_vw"),o=document.getElementById("frmItm"+t.field+"_btn");o.addEventListener("click",e.calendarPopupClicked),t.hiddenInput=s,t.dateTimeInput=u,t.dateTimeButton=o,""!==t.dateValue&&(s.value=t.dateValue,u.value=h(t),t.hasValue=!0)}},e.calPrev=function(e){const t=e.target.dataset.field,s=gblDateCtrlInfoByFieldName[t];let u=s.pickDate.getMonth(),o=s.pickDate.getFullYear();(u-=1)<0&&(u=11,o-=1,s.pickDate.setFullYear(o)),s.pickDate.setMonth(u),n(s),p(s)},e.calendarPopupClicked=function(e){const t=e.target.dataset.field,s=gblDateCtrlInfoByFieldName[t];let u=new Date;u.setHours(14),u.setMinutes(0),""!==s.dateValue?(u=new Date(s.dateValue),s.selDateTime=new Date(s.dateValue),s.selMonth=s.selDateTime.getMonth(),s.selDate=s.selDateTime.getDate(),s.selYear=s.selDateTime.getFullYear(),s.hasValue=!0):s.hasValue=!1,s.pendingSelDatePicked=!1,s.pendingSelDate="",s.pickDate=u,p(s)},e.calNext=function(e){const t=e.target.dataset.field,s=gblDateCtrlInfoByFieldName[t];let u=s.pickDate.getMonth(),o=s.pickDate.getFullYear();(u+=1)>11&&(u=0,o+=1,s.pickDate.setFullYear(o)),s.pickDate.setMonth(u),n(s),p(s)},e.calSetDateTime=function(e){const t=e.target.dataset.field,p=gblDateCtrlInfoByFieldName[t],s=[];if(!p.pendingSelDatePicked&&""!==p.dateValue){const e=new Date(p.dateValue);p.pendingSelDate=e,p.pendingSelDatePicked=!0}if(p.pendingSelDatePicked){const e=new Date,t=p.pendingSelDate;if(e.setMonth(t.getMonth()),e.setDate(t.getDate()),e.setFullYear(t.getFullYear()),!0===p.editTime){const t=document.getElementById("calHourEntry"),p=document.getElementById("calMinuteEntry"),u=document.getElementById("calAmPmSelect");let o=t.value-0,h=p.value-0;const l=u.value;(o<1||o>12)&&s.push("Invalid hour value. (Needs to be between 1 and 12)"),(h<0||h>59)&&s.push("Invalid minute value. (Needs to be between 00 and 59)"),"PM"===l&&(o+=12),o-=1,e.setHours(o),e.setMinutes(h)}if(s.length>0)return s.push(""),s.push("SET Canceled"),void alert(s.join("\n"));p.selDate=e,p.dateValue=e+"",p.pendingSelDate=void 0,p.pendingSelDatePicked=!1,p.hasValue=!0,p.hiddenInput.value=p.dateValue,p.dateTimeInput.value=h(p)}l()},e.calToday=function(e){const t=e.target.dataset.field,s=gblDateCtrlInfoByFieldName[t],u=new Date;s.pickDate.setMonth(u.getMonth()),s.pickDate.setDate(u.getDate()),s.pickDate.setFullYear(u.getFullYear()),n(s),p(s)},e.getCtrl=function(e){return gblDateCtrlInfoByFieldName[e]}}
